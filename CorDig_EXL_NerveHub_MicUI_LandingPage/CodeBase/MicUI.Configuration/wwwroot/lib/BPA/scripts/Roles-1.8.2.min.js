function DoTheCheck(n){var t=$(n).is(":checked");n.id=="chkAllApprove_"+n.name&&$(".chkApprove_"+n.name).prop("checked",t);n.id=="chkAllDelete_"+n.name&&$(".chkDelete_"+n.name).prop("checked",t);n.id=="chkAllModify_"+n.name&&$(".chkModify_"+n.name).prop("checked",t);n.id=="chkAllAdd_"+n.name&&$(".chkAdd_"+n.name).prop("checked",t);n.id=="chkAllView_"+n.name&&$(".chkView_"+n.name).prop("checked",t)}function openRoleApprovalWinPopup(){$("#RoleApprovalWindow").kendoWindow({title:ResourceRoles.display_Request_Status_List,modal:!0,height:"580px",width:"900px",content:ResourceRoles.urlPath_RolesApprovalView}).data("kendoWindow").center().open()}function openRequestStatusWinPopup(){$("#RoleRequestWindow").kendoWindow({title:ResourceRoles.display_Request_Approval_List,modal:!0,height:"580px",width:"900px",content:ResourceRoles.urlPath_RolesRequestView}).data("kendoWindow").center().open()}function OnClickRole(){window.location.href=ResourceRoles.urlPath_Index}function OnClickRoleSearch(){window.location.href=ResourceRoles.urlPath_RolesSearchView}function btnApprove_Click(n){n.preventDefault();var t=this.dataItem($(n.currentTarget).closest("tr"));$.ajax({type:"POST",url:ResourceRoles.urlPath_RoleApprove,data:JSON.stringify({RequestId:t.RequestId}),contentType:"application/json",success:function(n){n=="OK"?jAlert(ResourceRoles.display_Request_Approved_Successfully,"Alert",function(n){n&&$("#gridRoleApproval").data("kendoGrid").dataSource.read()}):jAlert(n,"Alert")}})}function btnRejected_Click(n){n.preventDefault();var t=$("#FromRoleIndex input").val(),i=this.dataItem($(n.currentTarget).closest("tr"));$.ajax({type:"POST",url:ResourceRoles.urlPath_RoleReject,data:{__RequestVerificationToken:t,RequestId:i.RequestId},datatype:"json",success:function(n){n=="OK"?jAlert(ResourceRoles.display_Request_Rejected_Successfully,"Alert",function(n){n&&$("#gridRoleApproval").data("kendoGrid").dataSource.read()}):jAlert(n,"Alert")}})}function startChange(){var t=$("#EndDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.min(n))}function endChange(){var t=$("#StartDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.max(n))}function getDate(){return{startDate:$("#StartDate").data("kendoDatePicker")._oldText,endDate:$("#EndDate").data("kendoDatePicker")._oldText}}function getStatusList(n){n.preventDefault();$("#gridRoleRequest").data("kendoGrid").dataSource.read()}function btnCancelRequest(n){var t=$("#FromRoleIndex input").val();$.ajax({type:"POST",url:ResourceRoles.urlPath_CancelRequest,data:{__RequestVerificationToken:t,RequestId:n},success:function(n){n=="OK"?jAlert(ResourceRoles.display_Request_cancelled_successfully,"Alert",function(n){n&&$("#gridRoleRequest").data("kendoGrid").dataSource.read()}):jAlert(n,"Alert")}})}function Go(){$("#formRolesSearchView").submit()}function OnClickRoles(){window.location.href=ResourceSearch.urlPath_Index+"?id=0"}function editRole(n){n.preventDefault();var i=$("#formRolesSearchView input").val(),t=this.dataItem($(n.currentTarget).closest("tr"));$.ajax({type:"POST",url:ResourceSearch.urlPath_EditingCustom_Edit,data:{sRoleID:t.RoleId},dataType:"json",success:function(n){n==1&&(window.location.href=ResourceSearch.urlPath_Index)}})}function deleteRole(n){n.preventDefault();var t=this.dataItem($(n.currentTarget).closest("tr")),i=$("#SearchApprover").val();i==""?(jAlert("Please Select Approver.."),$("#SearchApprover").focus()):jConfirm(ResourceSearch.display_Delete_Confirmation,"Confirmation",function(n){if(n){var i=$("#formRolesSearchView input").val();$.ajax({type:"POST",url:ResourceSearch.urlPath_EditingCustom_Edit,data:{__RequestVerificationToken:i,sRoleID:t.RoleId},dataType:"json",success:function(n){n==null&&$.ajax({type:"DELETE",url:ResourceSearch.urlPath_EditingCustom_Destroy,data:{__RequestVerificationToken:i,sRoleID:t.RoleId,iApprover:$("#SearchApprover").val()},dataType:"json",success:function(n){n==null?jAlert("Role Delete Successfully.","Alert",function(n){n&&$("#searchGrid").data("kendoGrid").dataSource.read()}):jAlert(n)},error:function(n,t,i){jAlert(i)}})}})}else return!1})}function validateModuleName(n){for(var i=0,t=0;t<n.length;t++)(n[t].SelectedView==1||n[t].SelectedAdd==1||n[t].SelectedModify==1||n[t].SelectedDelete==1||n[t].SelectedApprove==1)&&i++;return i>0?!0:!1}$.validator.defaults.ignore="";$("#btnRoleSave").on("click",function(n){var v=$("#RoleId").val(),h=!1,y=!1,e=0,c=n.srcElement==null||undefined?n.target:n.srcElement,t,o,r,f,i,u,a;if(GetFormValidate($("form"),c.name||c.name)){t={};t.RoleId=$("#RoleId").val();t.RoleName=$("#RoleName").val();t.Description=$("#Description").val();t.Disable=$("#Disable").is(":checked");t.IsClientUserRole=$("#IsClientUserRole").is(":checked");t.RoleLevel=$("#RoleLevel").val();var s=[],l=$("#gvRole").data("kendoGrid").dataSource,p=l._data.length;for(o=0;o<l._data.length;o++){for(r="#gvRole_"+$("#gvRole").data("kendoGrid").dataSource._data[o].ModuleName+" table tbody tr",f=$("#gvRole").data("kendoGrid").dataSource._data[o].ModuleName,i=0;i<$(r).length;i++)h=!0,y=!0,u={},u.SelectedView=$($(r)[i]).find(".chkView_"+f).is(":checked")==!0?1:0,u.SelectedAdd=$($(r)[i]).find(".chkAdd_"+f).is(":checked")==!0?1:0,u.SelectedModify=$($(r)[i]).find(".chkModify_"+f).is(":checked")==!0?1:0,u.SelectedDelete=$($(r)[i]).find(".chkDelete_"+f).is(":checked")==!0?1:0,u.SelectedApprove=$($(r)[i]).find(".chkApprove_"+f).is(":checked")==!0?1:0,u.FormId=$($(r)[i]).find("td:eq(0)").text(),s.push(u);h==!0?(validateModuleName(s)||(e=e+1),h=!1):v<=0&&(validateModuleName(s)||(e=e+1))}if(p==e)return jAlert("Please assign atleast one module."),!1;t.lstFromActionMap=s;a=$("#FromRoleIndex input").val();$.ajax({type:"POST",dataType:"json",url:ResourceRoles.urlPath_Index,data:{__RequestVerificationToken:a,JsonAllowActionData:t},success:function(n){n.success==!0?parseInt(n.strMsg)>0?jAlert(ResourceRoles.display_Request_Saved_successfully,"Alert",function(){window.location.href=ResourceRoles.urlPath_Index}):jAlert(n.strMsg,"Alert"):jAlert(n.message,"Alert")},error:function(){}})}else $("form").submit()});