function OpenBusinessJustifications(){try{var t=$("#ERPPopup").kendoWindow({actions:["Maximize","Close"],draggable:!0,modal:!0,pinned:!0,visible:!0,resizable:!0,title:"Process Window",height:"500px",width:"800px"});$("#ERPPopup").data("kendoWindow").center().open()}catch(n){alert(n.message)}$("#ErpPopupGrid").find(".chkbxErpPopupGrid").attr("checked",!1);$("#ErpPopupGrid").find(".checkbox").attr("checked",!1)}function GetClientSelectedValue(){return{iClientID:$("#ClientId").val()}}function OnSelectClient(){$("#ddl").data("kendoDropDownList").dataSource.read()}function OnClickAddProcessMaster(){var t=[],n;$("#ProcessERPMapping table > tbody > tr").each(function(){var n=$(this).find("[type=checkbox]");$(n).is(":checked")&&t.push(n.val())});n=[];n.push({field:"iProcessGroupID",hidden:!0});n.push({field:"oERPProcess.iERPCode",title:"ERP Code",width:100});n.push({field:"oERPProcess.sName",title:"ERP Name",encoded:!1,width:250});n.push({field:"",title:"",template:"<input type='button' value='DELETE' class='k-primary DelteRowProcess' iLoc='#=oERPProcess.oLocation.iLocationID#' iERPProcessID='#=oERPProcess.iERPProcessID#' iProcessGroupID='#=iProcessGroupID#' >",width:50});$.ajax({url:ResourceProcess.urlPath_fillErpGroupGridRead,type:"post",data:{iERPProcessIDList:t},cache:!1,success:function(t){var r,i,u;if($("#ERPPopup").data("kendoWindow").close(),t.lProcessGroup!=null){for(r=[],i=0;i<t.lProcessGroup.length;i++)r.push(t.lProcessGroup[i]);u=$("#GridErpGroup").getKendoGrid();u.destroy();$("#GridErpGroup").empty().kendoGrid({dataSource:{data:r},groupable:!1,sortable:!1,scrollable:!0,pageable:!1,columns:n})}}})}function OnBtnSearchClickProcessMaster(){var n=$("#ErpPopupGrid").data("kendoGrid");n.dataSource.read()}function GridFillterValueProcessMaster(){return{iLocation:$("#Location").val(),ErpProcessName:$("#ERPProcess").val()}}function OnClickNewProcessMaster(){window.location.href=ResourceProcess.urlPath_Index}function OnClickViewProcessMaster(){window.location.href=ResourceProcess.urlPath_SearchView}function OnSuccessSavedProcess(n){if(n=="1")jAlert(ResourceProcess.Msg_ProcessSaved,"Alert",function(){window.location.href=ResourceProcess.urlPath_Index});else return n=="2"?(jAlert(ResourceProcess.Msg_ProcessUpdated,"Alert",function(){window.location.href=ResourceProcess.urlPath_Index}),!1):n=="-1"?(jAlert(ResourceProcess.Msg_NoCalenderExist),!1):n=="-2"?(jAlert(ResourceProcess.Msg_PeocessCreatePermission),!1):n=="-3"?(jAlert(ResourceProcess.Msg_ProcessNameAlreadyExist),!1):(jAlert(n),!1)}function editProcess(n){n.preventDefault();var t=this.dataItem($(n.currentTarget).closest("tr")),i=$("#frmProcessSearchView input").val();$.ajax({type:"POST",url:ResourceProcessSearch.urlPath_SetEditableProcessId,data:{__RequestVerificationToken:i,tempProcessId:t.iProcessID},dataType:"json",success:function(){!0&&(window.location.href=ResourceProcessSearch.urlPath_Index)}})}function deleteProcess(n){jConfirm(ResourceProcessSearch.confirm_DeleteProcess,"Confirmation",function(t){if(t){n.preventDefault();var u=$(n.currentTarget).closest("tr")[0].rowIndex,i=$("#ProcessGrid").data("kendoGrid").dataItem($(n.currentTarget).closest("tr")),r=$("#frmProcessSearchView input").val();$.ajax({type:"POST",url:ResourceProcessSearch.urlPath_SetEditableProcessId,data:{__RequestVerificationToken:r,tempProcessId:i.iProcessID},dataType:"json",success:function(){$.ajax({type:"POST",url:ResourceProcessSearch.urlPath_DeleteProcess,data:{__RequestVerificationToken:r,iProcessID:i.iProcessID},dataType:"json",success:function(n){n==ResourceProcessSearch.display_Ok&&jAlert(ResourceProcessSearch.display_ProcessDeleted,"Alert",function(){$("#ProcessGrid  table > tbody tr:eq("+u+")").remove()})},error:function(n,t,i){jAlert(i)}})}})}else return!1})}function GetProcessListParam(){return{clientName:$("#ClientId").val(),processName:$("#ProcessName").val()}}function OnClickNew(){window.location.href=ResourceProcessSearch.urlPath_Index}function OnClickClear(){$("#ClientId").data("kendoDropDownList").value(-1);$("#ProcessGrid").data("kendoGrid").dataSource.read()}function onRowBoundProcessSearch(){$(".k-grid-Edit").find("span").addClass("k-icon k-edit");$(".k-grid-Delete").find("span").addClass("k-icon k-delete")}function GridFillterValue(){return{iLocation:$("#Location").val(),ErpProcessName:$("#ERPProcess").val()}}function StabilizationstartChange(){var t=$("#StabilizationEndDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.min(n))}function StabilizationendChange(){var t=$("#StabilizationStartDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.max(n))}function PilotstartChange(){var t=$("#PilotEndDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.min(n))}function PilotendChange(){var t=$("#PilotStartDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.max(n))}function ProductionstartChange(){var t=$("#ProductionEndDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.min(n))}function ProductionendChange(){var t=$("#ProductionStartDate").data("kendoDatePicker"),n=this.value();n&&(n=new Date(n),n.setDate(n.getDate()),t.max(n))}function OnClickAddData(){var n=$("#ErpPopupGrid").data("kendoGrid"),t=[];n.tbody.find("input:checked").closest("tr").each(function(){n.select($(this));var i=n.dataItem($(this));i.checkbox="true";t.push(i.iERPProcessID)});window.location.href=ResourceProcessViewPopup.urlPath_Index+"?iERPProcessIDList="+t}$(".k-select").css("cursor","pointer");$(".chkbxErpPopupGrid").on("click",function(){$(this).is(":checked")?$(".checkbox").prop("checked","checked"):$(".checkbox").prop("checked",!1)});$(document).ready(function(){$("#tabstrip").kendoTabStrip({animation:{open:{effects:"fadeIn"}}})});$(".clsCell").on("change",function(){var n={iLocationID:$(this).attr("iLoc"),iProcessFTEID:$(this).attr("iFTE"),columnName:$(this).attr("cName"),columnValue:$(this).val()==""?$(this).find("input").val():$(this).val()};$.ajax({url:"/Process/UpdateProcessFTERowState",type:"post",datatype:"json",data:{Params:n},cache:!1,success:function(){}})});$("#btnSearchProcess").on("click",function(n){n.preventDefault();var t=$("#frmProcessSearchView").kendoValidator().data("kendoValidator");if(t.validate())$("#ProcessGrid").data("kendoGrid").dataSource.read();else return!1});var iERPProcessIDList=null;$("#btnSearch").click(function(n){$("#ErpPopupGrid").data("kendoGrid").dataSource.read();$("#ErpPopupGrid").data("kendoGrid").refresh();n.preventDefault()});$(".DelteRowProcess").on("click",function(){var r=$("input[name=__RequestVerificationToken]").val(),u=$(this).attr("ierpprocessid"),i=[],t,n;i.push(u);t=[];t.push({field:"iProcessGroupID",hidden:!0});t.push({field:"oERPProcess.iERPCode",title:"ERP Code",width:100});t.push({field:"oERPProcess.sName",title:"ERP Name",encoded:!1,width:250});t.push({field:"",title:"",template:"<input type='button' value='DELETE' class='k-primary DelteRowProcess' iLoc='#=oERPProcess.oLocation.iLocationID#' iERPProcessID='#=oERPProcess.iERPProcessID#' iProcessGroupID='#=iProcessGroupID#' >",width:50});n=[];n.push({field:"oLocation.iLocationID",hidden:!0});n.push({field:"iProcessFTEID",hidden:!0});n.push({field:"oLocation.sLocationName",title:"Location",attributes:{disabled:"disabled"},editable:!0,width:100});n.push({field:"iFTE",title:"FTE",width:100,attributes:{cName:"iFTE",iLoc:"#=oLocation.iLocationID#",iFTE:"#=iProcessFTEID#","class":"clsCell"}});n.push({field:"iQCACount",title:"QCACount",width:100,attributes:{cName:"QCACount",iLoc:"#=oLocation.iLocationID#",iFTE:"#=iProcessFTEID#","class":"clsCell"}});n.push({field:"dtEffectiveStartDate",template:"#=kendo.toString(dtEffectiveStartDate,'MM-dd-yyyy')#",title:"Eff. Start Date",editable:!0,width:100,attributes:{cName:"dtEffectiveStartDate",iLoc:"#=oLocation.iLocationID#",iFTE:"#=iProcessFTEID#","class":"clsCell"}});n.push({field:"dtEffectiveEndDate",template:"#=kendo.toString(dtEffectiveEndDate,'MM-dd-yyyy')#",title:"Eff. End Date",editable:!0,width:100,attributes:{cName:"dtEffectiveEndDate",iLoc:"#=oLocation.iLocationID#",iFTE:"#=iProcessFTEID#","class":"clsCell"}});$.ajax({url:ResourceProcess.urlPath_DeleteErpGroupGridRead,type:"post",data:{__RequestVerificationToken:r,iERPProcessIDList:i},cache:!1,dataType:"json",success:function(i){var u,r,f,e,o,s;if($("#ERPPopup").data("kendoWindow").close(),i.lProcessGroup!=null){for(u=[],r=0;r<i.lProcessGroup.length;r++)u.push(i.lProcessGroup[r]);f=$("#GridErpGroup").getKendoGrid();f.destroy();$("#GridErpGroup").empty().kendoGrid({dataSource:{data:u},groupable:!1,sortable:!1,scrollable:!0,pageable:!1,columns:t});e=[];o=[];$.each(i.lProcessFTE,function(n,t){t.dtEffectiveStartDate=(new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getYear();t.dtEffectiveEndDate=(new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getYear()});s=$("#GridProcessEtE").getKendoGrid();$("#GridProcessEtE").empty().kendoGrid({dataSource:{data:i.lProcessFTE},groupable:!1,sortable:!1,scrollable:!0,pageable:!1,editable:!0,schema:n,columns:n})}},error:function(n,t,i){jAlert(i)}})});