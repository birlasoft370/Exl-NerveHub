function GetLicensePackageDeatilById(n){$.ajax({url:GlobalVaribale.SiteUrl+"/Package/GetLicensePackageDeatilById/"+n,dataType:"json",type:"post",error:function(){jAlert("An error occurred.","Alert")},success:function(n){if($("#tblModule").show(),n.length>0)for(var t=0;t<n.length;t++)$("#tblModule > tbody").append("<tr><td width='50%'><div FeatureId="+n[t].FeatureId+" ModuleId="+n[t].ModuleId+" >"+n[t].ModuleName+"<\/div><\/td><td width='50%'>"+n[t].FeatureName+"<\/td><td><input title='Remove' class='deleteIcon FeatureReomve' type='button' /> <\/td><\/tr>")}})}function OnSuccessAddPackage(n){n>0?jAlert("Package name saved successfully","Alert",function(n){n&&(window.location.href=GlobalVaribale.SiteUrl+"/Package/PackageList")}):n<0?jAlert("Package name is already exist, please enter some other package name.","Alert"):n==0&&(jAlert("There is an error while saving package name","Alert"),$("#PackageName").val(""),$("#PackageDescription").val(""))}function OnSuccessSavePackageSubscription(n){return n<0?jAlert("Client have already subscried for a package","Alert"):n==0?jAlert("An error occurred while saving clinet package subscription","Alert"):n>0&&jAlert("Client subscription saved successfully","Alert",function(n){n&&(window.location.href=GlobalVaribale.SiteUrl+"/Package/PackageSubscriptionList")}),!1}function DeleteSubscription(n){jConfirm("Are you sure, you want to delete this subscription?","Confirmation",function(t){if(t)$.ajax({url:GlobalVaribale.SiteUrl+"/Package/DeleteSubscription/"+n,dataType:"json",type:"Post",error:function(){jAlert("An error occurred.","Alert")},success:function(n){n>0?jAlert("Subscription has been deleted successfully","Alert",function(){window.location.href=GlobalVaribale.SiteUrl+"/Package/PackageSubscriptionList"}):jAlert("An error occurred.","Alert")}});else return!1})}function DeletePackageLicenseFeatures(n){jConfirm("Are you sure, you want to delete this package license?","Confirmation",function(t){if(t)$.ajax({url:GlobalVaribale.SiteUrl+"/Package/DeletePackageLicense/"+n,dataType:"json",type:"POST",error:function(){jAlert("An error occurred.","Alert")},success:function(n){n>0?jAlert("Package license has been deleted successfully","Alert",function(n){n&&(window.location.href=GlobalVaribale.SiteUrl+"/Package/LicensePackageList")}):jAlert("An error occurred.","Alert")}});else return!1})}function DeletePackage(n){jConfirm("Are you sure, you want to delete this package?\nAll the reference records will deleted!","Confirmation",function(t){if(t)$.ajax({url:GlobalVaribale.SiteUrl+"/Package/DeletePackage/"+n,dataType:"json",type:"POST",error:function(){jAlert("An error occurred.","Alert")},success:function(n){n>0?jAlert("Package has been deleted successfully","Alert",function(n){n&&(window.location.href=GlobalVaribale.SiteUrl+"/Package/PackageList")}):jAlert("An error occurred.","Alert")}});else return!1})}function ValidatePackageSubscriptionPage(){var n=$("#LicenseStartDate").val(),t=$("#LicenseEndDate").val();return new Date(t)<=new Date(n)?($("#errLicenseEndDate").text("End date can not be less or equal to start date"),$("#errLicenseEndDate").show(),!1):($("#errLicenseEndDate").hide(),!0)}var flage=0;$("select#PackageName").on("change",function(){$("#PackageName").prop("disabled",!0)});$("#ModuleName").on("change",function(){var n=$("#ModuleName").val();$.ajax({url:GlobalVaribale.SiteUrl+"/Package/GetModuleFeature",data:{ModuleId:n},dataType:"json",type:"GET",error:function(){jAlert(" An error occurred.","Alert")},success:function(n){for(var t="<div id='divFeatures' style='float: left'>",i=0;i<n.length;i++)t=t+"<input  style='float: left' type='checkbox' id='chkFeature"+n[i].ModuleFeatureID+"'  FeatureId='"+n[i].ModuleFeatureID+"' FeatureName='"+n[i].FeatureName+"' >",t=t+"<span>"+n[i].FeatureName+"<\/span>",t=t+"<\/br><\/br>";t=t+"<\/div>";$("#divFeatures").html(t)}})});$("#btnAddFeatures").on("click",function(){var n=0;if($("#tblModule").show(),$("#divFeatures input[type=checkbox]").each(function(){$(this).is(":checked")&&n++}),n==0&&$("select#ModuleName").val()!="")return jAlert("Please select one feature","Alert"),!1;if($("#divFeatures input[type=checkbox]").each(function(){if($(this).is(":checked")){var n=$(this).attr("FeatureId"),t=$(this).attr("FeatureName");$("#tblModule > tbody tr td div").each(function(){if(n==$(this).attr("FeatureId"))return jAlert("You have already selected <b>"+t+"<\/b>","Alert"),flage=1,!1})}}),flage==0&&$("#divFeatures input[type=checkbox]").each(function(){if($(this).is(":checked")){var n=$(this).attr("FeatureId"),t=$(this).attr("FeatureName");$("#tblModule > tbody").append("<tr><td width='50%'><div FeatureId="+n+" ModuleId="+($("#ModuleName").val()+">"+$("#ModuleName :selected").text()+"<\/div><\/td><td width='50%'>"+t+"<\/td><td><input title='Remove' class='deleteIcon FeatureReomve' type='button' /> <\/td><\/tr>"))}}),$("#tblModule > tbody tr td div").length<1)return jAlert("Please select at least one module and feature","Alert"),flage;flage=0});$("#btnRemoveFeatures").on("click",function(){$("#tblModule > tbody tr").length!=1&&$("#tblModule > tbody tr:last").remove()});$("#btnSavePackageLicense").on("click",function(){var t;if($("select#PackageName").val()=="")return jAlert("Please select package first","Alert",function(n){n&&$("select#PackageName").focus()}),!1;var n=[],i=$("select#PackageName").val();if($("#tblModule > tbody tr td div").each(function(){var t=$(this).attr("ModuleId"),r=$(this).attr("FeatureId");n.push({PackageId:i,ModuleId:t,FeatureId:r})}),t="",t=$("#ActionType").val()=="Insert"?GlobalVaribale.SiteUrl+"/Package/InsertPackageLisence":GlobalVaribale.SiteUrl+"/Package/UpdatePackageLisence",n.length>0)$.ajax({url:t,data:JSON.stringify(n),dataType:"json",contentType:"application/json; charset=utf-8",type:"post",error:function(){jAlert(" An error occurred.","Alert")},success:function(n){parseInt(n)>0?jAlert("Module package is saved successfully","Alert",function(n){n&&(window.location.href=GlobalVaribale.SiteUrl+"/Package/LicensePackageList")}):parseInt(n)==-1?jAlert("This package already added","Alert"):jAlert("An error occurred while saving module package","Alert")}});else return jAlert("Please select atleast one module and feature","Alert",function(n){n&&$("select#ModuleName").focus()}),!1});$(".FeatureReomve").on("click",function(){$(this).parent().parent().remove()});$("#LicenseEndDate").on("blur change",function(){ValidatePackageSubscriptionPage()});$("#ancSearch").on("click",function(){$("#form1").submit()});$(document).keypress(function(n){n.which==13&&($("#SearchText").is(":focus")?$("#form1").submit():$("#SearchText").focus())});$(".close1, .btnCancel").on("click",function(){$("#divPopup").hide();$("#divOverlay").hide()});$("#ancPackageAdvanceSearch,#ancPackageLicenseAdvanceSearch,#ancSubscriptionAdvanceSearch").on("click",function(){$("#SearchText").val("");var n="",t="";$(this).context.id=="ancPackageAdvanceSearch"?(n=GlobalVaribale.SiteUrl+"/Package/AdvanceSearch/Package",varTitle="Package advance search"):$(this).context.id=="ancPackageLicenseAdvanceSearch"?(n=GlobalVaribale.SiteUrl+"/Package/AdvanceSearch/PackageLicense",varTitle="Package license advance search"):$(this).context.id=="ancSubscriptionAdvanceSearch"&&(n=GlobalVaribale.SiteUrl+"/Package/AdvanceSearch/Subscription",varTitle="Package subscription advance search");$.ajax({url:n,type:"get",dataType:"html",success:function(n){OpenSmallModalPopup(n);$("#spnHeaderTitle").text(t)},error:function(){jAlert("An error occured")}})});$("#btnAdvanceSearch").on("click",function(){var n=$.trim($("#AdvanceSearchText").val());if($("#AdvanceSearchColumn").val()=="")return jAlert("Please select a column to search","Alert",function(n){n&&$("#AdvanceSearchColumn").focus()}),!1;if($("#AdvanceSearchColumn").val()!=""&&n=="")return jAlert("Please enter text to search","Alert",function(n){n&&($("#AdvanceSearchText").val(""),$("#AdvanceSearchText").focus())}),!1;$("#form1").submit()});$("#ancClearSearch").on("click",function(){$("#SearchText").val("");$("#AdvanceSearchText").val("");$("#form1").submit()});